# Player.js

Просмотрщик на чистом JavaScript. На данный момент может отображать видео, графику и книги в формате PDF.

Для работы модуля необходим HTML-блок с одним из преопределенных классов:
- <b>video</b> - будет создан видеоплеер;
- <b>image</b> - просмотрщик картинок;
- <b>book</b> - просмотрщик книг в формате PDF

Если такой блок есть, то создать блок очень просто:

Предположим что такой блок это:

```
<div class="video"></div>
```

тогда код создания объекта плеера в простейшем случае:

```
let player = new Player(document.querySelector('div.video'));
```

Вторым параметром конструктора может быть объект конфигурации - объект имплементирующий следующий интерфейс:

```
interface IPlayerOptions {

    /**
     * Путь к файлу со стилями
     */
    readonly styleFilePath?: string;

    /**
     * Выбирать первый элемент при инициализации плеера
     */
    readonly activate?: boolean;

    /**
     * Класс блока просмотра
     */
    readonly mainWrapperClass?: string;

    /**
     * Класс блока превью
     */
    readonly imageWrapperClass?: string;

    /**
     * Ширина кпопок прокрутки
     */
    readonly scrollButtonsWidth?: number;

    /**
     * Погрешность клика по кнопкам прокрутки
     */
     readonly scrollButtonsPadding?: number;

     /**
      * Изображения с этим классом не загружаются в плеер
      */
      readonly imageStopClass?: string;
}
```

У каждого ресурса, загружаемого в просмотрщик, есть превью в виде изображения. Собственно, в виде изображений в плеер и добавляются новые элементы, а затем преобразуются во внутренний формат.

Добавлять элементы в плеер можно следующим способом:

```
player.addItem(image, true);
```

Элементы всегда добавляются в виде объектов HTMLImageElement, которые должны содержать необходимые артибуты:

- <i>src</i> - путь к изображению;
- <i>title</i> - имя загружаемого ресурса;
- <b><i>data-object-src</i></b> - путь к ресурсу, который представляет изображение (ссылка на видео, картинку или книгу).

и могут содержать опциональные атрибуты:
- <i>data-type</i> - этим атрибутом можно задать опциональный тип ресурса, если требуется как-то делить ресурсы по типам.

При этом создается элементы <i>\<span></i> с задынными атрибутами + по умолчанию атрибут <i>class</i> задается со значением <i>img</i> внутренний HTML-код будет:

```
<i class="material-icons">close</i>
```

если использовать бибилиотеку [materializecss](https://materializecss.com), то такой элемент разметки добавит кнопку удаления элемента плеера.

Второй параметр указывает перереходить ли к добавляемого элементу сказу же после добавления или нет.

Удаление элемента:

```
deleteItem(index);
```

где <i>index</i> индекс удаляемого элемента в плеере.

<br>

Если обрабатываемый модулем блок на момент иниициализации плеера уже содержит изображения с необходимыми атрибутами, они автоматически добавляются в плеер, за исключением тех, которые содержат класс задаваемый директивой <b>imageStopClass</b> конфигурации плеера (<i>IPlayerOptions</i>), по умолчанию это класс <b>no-image</b>.

<br>

[Документация методов](docs_ru)
